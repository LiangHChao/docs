<?xml version="1.0" encoding="utf-8"?><?xml-stylesheet type="text/xsl" href="rss.xsl"?>
<rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/">
    <channel>
        <title>LiangHChao的个人博客项目 Blog</title>
        <link>https://lianghchao.github.io/docs/blog</link>
        <description>LiangHChao的个人博客项目 Blog</description>
        <lastBuildDate>Sun, 01 Aug 2027 00:00:00 GMT</lastBuildDate>
        <docs>https://validator.w3.org/feed/docs/rss2.html</docs>
        <generator>https://github.com/jpmonette/feed</generator>
        <language>en</language>
        <item>
            <title><![CDATA[MDX博客]]></title>
            <link>https://lianghchao.github.io/docs/blog/mdx-blog-post</link>
            <guid>https://lianghchao.github.io/docs/blog/mdx-blog-post</guid>
            <pubDate>Sun, 01 Aug 2027 00:00:00 GMT</pubDate>
            <description><![CDATA[Blog posts support Docusaurus Markdown features, such as MDX.]]></description>
            <content:encoded><![CDATA[<p>Blog posts support <a href="https://docusaurus.io/docs/markdown-features" target="_blank" rel="noopener noreferrer" class="">Docusaurus Markdown features</a>, such as <a href="https://mdxjs.com/" target="_blank" rel="noopener noreferrer" class="">MDX</a>.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Use the power of React to create interactive blog posts.</p></div></div>
<!-- -->
<p>For example, use JSX to create an interactive button:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">'button clicked!'</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Click</span><span class="token plain"> me</span><span class="token operator" style="color:#393A34">!</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<button>Click me!</button>]]></content:encoded>
            <category>docusaurus</category>
        </item>
        <item>
            <title><![CDATA[架构级项目]]></title>
            <link>https://lianghchao.github.io/docs/blog/java-spring boot</link>
            <guid>https://lianghchao.github.io/docs/blog/java-spring boot</guid>
            <pubDate>Tue, 10 Feb 2026 00:00:00 GMT</pubDate>
            <description><![CDATA[什么是架构级项目？]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="什么是架构级项目">什么是架构级项目？<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9E%B6%E6%9E%84%E7%BA%A7%E9%A1%B9%E7%9B%AE" class="hash-link" aria-label="Direct link to 什么是架构级项目？" title="Direct link to 什么是架构级项目？" translate="no">​</a></h3>
<p><strong>简单理解：</strong>
架构级项目 ≠ 功能多的项目
而是指：<strong>从第一天就考虑长远发展，代码结构清晰，容易维护和扩展的项目</strong></p>
<p><strong>核心特点：</strong></p>
<ul>
<li class="">🎯 <strong>可扩展</strong>：加功能不改老代码</li>
<li class="">🔧 <strong>易维护</strong>：新人能快速上手</li>
<li class="">⚡ <strong>高性能</strong>：能应对流量增长</li>
<li class="">🛡️ <strong>高可靠</strong>：出问题能快速定位</li>
<li class="">🔒 <strong>安全性</strong>：有完善的防护机制</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-对比示例普通项目-vs-架构级项目">📊 对比示例：普通项目 vs 架构级项目<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E5%AF%B9%E6%AF%94%E7%A4%BA%E4%BE%8B%E6%99%AE%E9%80%9A%E9%A1%B9%E7%9B%AE-vs-%E6%9E%B6%E6%9E%84%E7%BA%A7%E9%A1%B9%E7%9B%AE" class="hash-link" aria-label="Direct link to 📊 对比示例：普通项目 vs 架构级项目" title="Direct link to 📊 对比示例：普通项目 vs 架构级项目" translate="no">​</a></h2>
<table><thead><tr><th>场景</th><th>普通项目（学生/初级开发）</th><th>架构级项目（企业级）</th></tr></thead><tbody><tr><td><strong>用户登录</strong></td><td>Controller直接查数据库，密码明文存储</td><td>分层架构：Controller → Service → AuthProvider<br>密码BCrypt加密 + 登录失败限流 + 支持OAuth2扩展</td></tr><tr><td><strong>新增功能</strong></td><td>在原有类里疯狂加if-else</td><td>通过策略模式/插件机制<br>不改核心代码就能扩展新功能</td></tr><tr><td><strong>系统崩溃</strong></td><td>日志全是System.out.println<br>出问题找不到原因</td><td>全链路TraceID + 结构化日志<br>监控告警 + 自动定位问题</td></tr><tr><td><strong>流量突增</strong></td><td>直接宕机，服务不可用</td><td>熔断降级 + 缓存机制<br>异步处理 + 负载均衡</td></tr><tr><td><strong>团队协作</strong></td><td>所有人改同一个包<br>代码冲突频繁</td><td>模块解耦 + 接口契约<br>并行开发互不影响</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-架构级项目的4大核心特征">🔍 架构级项目的4大核心特征<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E6%9E%B6%E6%9E%84%E7%BA%A7%E9%A1%B9%E7%9B%AE%E7%9A%844%E5%A4%A7%E6%A0%B8%E5%BF%83%E7%89%B9%E5%BE%81" class="hash-link" aria-label="Direct link to 🔍 架构级项目的4大核心特征" title="Direct link to 🔍 架构级项目的4大核心特征" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-分层清晰layered-architecture">1. 分层清晰（Layered Architecture）<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#1-%E5%88%86%E5%B1%82%E6%B8%85%E6%99%B0layered-architecture" class="hash-link" aria-label="Direct link to 1. 分层清晰（Layered Architecture）" title="Direct link to 1. 分层清晰（Layered Architecture）" translate="no">​</a></h3>
<p><strong>就像盖房子一样，每层都有明确职责：</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">表现层 (Controller)     ← 接收用户请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">应用层 (Service)       ← 处理业务流程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">领域层 (Domain)        ← 核心业务逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">基础设施层 (Infra)     ← 数据库、缓存等技术实现</span><br></span></code></pre></div></div>
<p><strong>好处：</strong> 高内聚低耦合，业务逻辑不依赖具体技术框架</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-关注非功能性需求">2. 关注非功能性需求<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#2-%E5%85%B3%E6%B3%A8%E9%9D%9E%E5%8A%9F%E8%83%BD%E6%80%A7%E9%9C%80%E6%B1%82" class="hash-link" aria-label="Direct link to 2. 关注非功能性需求" title="Direct link to 2. 关注非功能性需求" translate="no">​</a></h3>
<table><thead><tr><th>需求</th><th>架构体现</th><th>简单理解</th></tr></thead><tbody><tr><td><strong>可扩展性</strong></td><td>策略模式、插件机制</td><td>加功能不改老代码</td></tr><tr><td><strong>可靠性</strong></td><td>重试机制、熔断器</td><td>出错能自动恢复</td></tr><tr><td><strong>可观测性</strong></td><td>链路追踪、监控告警</td><td>出问题能快速发现</td></tr><tr><td><strong>安全性</strong></td><td>权限控制、数据脱敏</td><td>保护系统和数据安全</td></tr><tr><td><strong>可部署性</strong></td><td>Docker + CI/CD</td><td>一键部署，自动发布</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-使用成熟架构模式">3. 使用成熟架构模式<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#3-%E4%BD%BF%E7%94%A8%E6%88%90%E7%86%9F%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F" class="hash-link" aria-label="Direct link to 3. 使用成熟架构模式" title="Direct link to 3. 使用成熟架构模式" translate="no">​</a></h3>
<p><strong>常见的架构模式：</strong></p>
<ul>
<li class=""><strong>DDD（领域驱动设计）</strong>：把复杂的业务逻辑组织得清清楚楚</li>
<li class=""><strong>CQRS</strong>：读写分离，查询和修改用不同的方式处理</li>
<li class=""><strong>事件驱动</strong>：用消息队列解耦系统组件</li>
<li class=""><strong>六边形架构</strong>：核心业务与外部技术解耦</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-工程化能力完备">4. 工程化能力完备<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#4-%E5%B7%A5%E7%A8%8B%E5%8C%96%E8%83%BD%E5%8A%9B%E5%AE%8C%E5%A4%87" class="hash-link" aria-label="Direct link to 4. 工程化能力完备" title="Direct link to 4. 工程化能力完备" translate="no">​</a></h3>
<ul>
<li class="">✅ <strong>自动化测试</strong>：单元测试、集成测试、端到端测试</li>
<li class="">✅ <strong>代码质量</strong>：SonarQube代码检查、代码规范</li>
<li class="">✅ <strong>配置管理</strong>：Nacos/Apollo统一配置中心</li>
<li class="">✅ <strong>API网关</strong>：Spring Cloud Gateway统一入口</li>
<li class="">✅ <strong>分布式事务</strong>：Seata/Saga保证数据一致性</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-实战案例订单创建功能">🌰 实战案例：订单创建功能<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E5%AE%9E%E6%88%98%E6%A1%88%E4%BE%8B%E8%AE%A2%E5%8D%95%E5%88%9B%E5%BB%BA%E5%8A%9F%E8%83%BD" class="hash-link" aria-label="Direct link to 🌰 实战案例：订单创建功能" title="Direct link to 🌰 实战案例：订单创建功能" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="-普通写法面条代码">❌ 普通写法（面条代码）<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E6%99%AE%E9%80%9A%E5%86%99%E6%B3%95%E9%9D%A2%E6%9D%A1%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="Direct link to ❌ 普通写法（面条代码）" title="Direct link to ❌ 普通写法（面条代码）" translate="no">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@PostMapping("/order")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public Result createOrder(OrderDTO dto) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 1. 校验库存</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (stockService.get(dto.getSkuId()) &lt; dto.getCount()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return error("库存不足");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 2. 扣减库存（直接调 DB）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    stockMapper.decrease(dto.getSkuId(), dto.getCount());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 3. 创建订单</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    orderMapper.insert(dto);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 4. 发送短信</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    smsService.send("下单成功");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return success();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>问题：</strong></p>
<ul>
<li class="">🔄 耦合严重：所有逻辑写在一起</li>
<li class="">🚨 无法回滚：出错就数据不一致</li>
<li class="">🔄 无幂等：重复提交会出问题</li>
<li class="">🧪 难测试：要启动整个数据库</li>
<li class="">🔄 难扩展：加功能就要改核心代码</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="-架构级写法">✅ 架构级写法<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E6%9E%B6%E6%9E%84%E7%BA%A7%E5%86%99%E6%B3%95" class="hash-link" aria-label="Direct link to ✅ 架构级写法" title="Direct link to ✅ 架构级写法" translate="no">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// 1. 应用服务层 - 处理业务流程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Transactional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public OrderId createOrder(CreateOrderCommand cmd) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 领域校验</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Product product = productRepository.findById(cmd.getSkuId());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    product.checkStock(cmd.getCount());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 创建订单</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Order order = Order.create(cmd);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    orderRepository.save(order);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // 发布事件（解耦）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    eventPublisher.publish(new OrderCreatedEvent(order.getId()));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    return order.getId();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// 2. 基础设施层 - 监听事件发短信</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@EventListener</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public void onOrderCreated(OrderCreatedEvent event) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    smsClient.sendAsync("下单成功"); // 异步处理</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>优势：</strong></p>
<ul>
<li class="">✅ 业务逻辑集中在领域层</li>
<li class="">✅ 事务安全，自动回滚</li>
<li class="">✅ 扩展点清晰（加积分？监听同一事件）</li>
<li class="">✅ 可测试（Mock Repository即可）</li>
<li class="">✅ 解耦合（发短信不影响下单主流程）</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-如何识别架构级项目">💡 如何识别架构级项目？<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E5%A6%82%E4%BD%95%E8%AF%86%E5%88%AB%E6%9E%B6%E6%9E%84%E7%BA%A7%E9%A1%B9%E7%9B%AE" class="hash-link" aria-label="Direct link to 💡 如何识别架构级项目？" title="Direct link to 💡 如何识别架构级项目？" translate="no">​</a></h2>
<p>看开源项目时，重点检查这些特征：</p>
<p>✅ <strong>代码结构清晰</strong></p>
<ul>
<li class="">有domain包？→ 有DDD思想</li>
<li class="">有config/aspect/exception包？→ 有全局处理</li>
<li class="">Repository用接口定义？→ 解耦良好</li>
</ul>
<p>✅ <strong>工程化完善</strong></p>
<ul>
<li class="">有docker-compose.yml？→ 支持容器化部署</li>
<li class="">有.github/workflows？→ 有CI/CD流水线</li>
<li class="">README有架构图？→ 设计文档完善</li>
</ul>
<p>✅ <strong>技术选型成熟</strong></p>
<ul>
<li class="">用Spring Boot + Spring Cloud？</li>
<li class="">有统一配置中心？</li>
<li class="">有链路追踪和监控？</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-学习路径推荐">📚 学习路径推荐<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E5%AD%A6%E4%B9%A0%E8%B7%AF%E5%BE%84%E6%8E%A8%E8%8D%90" class="hash-link" aria-label="Direct link to 📚 学习路径推荐" title="Direct link to 📚 学习路径推荐" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="-入门阶段">🎯 入门阶段<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E5%85%A5%E9%97%A8%E9%98%B6%E6%AE%B5" class="hash-link" aria-label="Direct link to 🎯 入门阶段" title="Direct link to 🎯 入门阶段" translate="no">​</a></h3>
<ol>
<li class="">
<p><strong>先理解概念</strong></p>
<ul>
<li class="">《企业应用架构模式》- Martin Fowler</li>
<li class="">《Head First设计模式》- 简单易懂</li>
</ul>
</li>
<li class="">
<p><strong>看优秀源码</strong></p>
<ul>
<li class="">Spring Boot源码（分层结构清晰）</li>
<li class="">MyBatis-Plus源码（插件机制）</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="-进阶阶段">🚀 进阶阶段<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E8%BF%9B%E9%98%B6%E9%98%B6%E6%AE%B5" class="hash-link" aria-label="Direct link to 🚀 进阶阶段" title="Direct link to 🚀 进阶阶段" translate="no">​</a></h3>
<ol>
<li class="">
<p><strong>实践DDD</strong></p>
<ul>
<li class="">用Clean Architecture重构一个小项目</li>
<li class="">从简单电商系统开始练习</li>
</ul>
</li>
<li class="">
<p><strong>学习微服务</strong></p>
<ul>
<li class="">Spring Cloud Alibaba全家桶</li>
<li class="">Eventuate Tram（分布式事务）</li>
<li class="">Moduliths（模块化单体）</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="-高级阶段">🏆 高级阶段<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E9%AB%98%E7%BA%A7%E9%98%B6%E6%AE%B5" class="hash-link" aria-label="Direct link to 🏆 高级阶段" title="Direct link to 🏆 高级阶段" translate="no">​</a></h3>
<ol>
<li class="">
<p><strong>架构设计</strong></p>
<ul>
<li class="">C4模型画架构图</li>
<li class="">高并发系统设计</li>
<li class="">分布式系统设计</li>
</ul>
</li>
<li class="">
<p><strong>团队协作</strong></p>
<ul>
<li class="">架构评审流程</li>
<li class="">技术方案设计</li>
<li class="">代码规范制定</li>
</ul>
</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-总结">🎯 总结<a href="https://lianghchao.github.io/docs/blog/java-spring%20boot#-%E6%80%BB%E7%BB%93" class="hash-link" aria-label="Direct link to 🎯 总结" title="Direct link to 🎯 总结" translate="no">​</a></h2>
<p><strong>一句话理解：</strong></p>
<blockquote>
<p>架构级项目 = 好的代码结构 + 完善的工程化 + 成熟的设计思想</p>
</blockquote>
<p><strong>核心价值：</strong></p>
<ul>
<li class="">📈 <strong>业务增长</strong>：系统能支撑业务快速发展</li>
<li class="">👥 <strong>团队扩张</strong>：新人能快速上手，协作效率高</li>
<li class="">🔧 <strong>技术演进</strong>：能平滑升级技术栈</li>
<li class="">💰 <strong>降本增效</strong>：减少维护成本，提高开发效率</li>
</ul>
<p><strong>记住：</strong> 代码是死的，架构思想是活的。好的架构能让复杂系统变得简单可控！</p>]]></content:encoded>
            <category>Java</category>
            <category>spring boot</category>
        </item>
        <item>
            <title><![CDATA[养生]]></title>
            <link>https://lianghchao.github.io/docs/blog/live food</link>
            <guid>https://lianghchao.github.io/docs/blog/live food</guid>
            <pubDate>Sun, 18 Jan 2026 00:00:00 GMT</pubDate>
            <description><![CDATA[食疗养生]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="食疗养生">食疗养生<a href="https://lianghchao.github.io/docs/blog/live%20food#%E9%A3%9F%E7%96%97%E5%85%BB%E7%94%9F" class="hash-link" aria-label="Direct link to 食疗养生" title="Direct link to 食疗养生" translate="no">​</a></h3>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="未验证">未验证<a href="https://lianghchao.github.io/docs/blog/live%20food#%E6%9C%AA%E9%AA%8C%E8%AF%81" class="hash-link" aria-label="Direct link to 未验证" title="Direct link to 未验证" translate="no">​</a></h3>
<p>1、虾皮，它是补钙补肾王</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">第一步去盐去砂，留下咸味入肾的性；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">第二步滤干水分，晾干；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">第三步，用砂锅或不锈钢，不用铁锅，一定要炒，把寒邪气逼出，通过火的炮制把它的阳气逼出来；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">第四步，观色闻香，待有点烤面包的颜色，香味散发满厨房程度，手一捻就成粉末即好；</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">第五步，研末封存，装在密封罐内，这就是还魂补肾粉，每天早上舀一勺拌在粥或蛋羹里吃。</span><br></span></code></pre></div></div>
<p>2、腐竹白果汤</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">腐竹要买颜色豆黄的，不要买漂白过的毒腐竹，放7～10粒去毒芯的白果杏仁，加几块猪瘦肉或排骨，不要放有毒的淋巴肉，炖熟即可，这个汤补肺健脾，生精健身，清血管。</span><br></span></code></pre></div></div>
<p>3、醋泡黑豆</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">黑皮绿芯的黑豆</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">洗净炒制泡粮食醋49天</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">晚饭后吃10～15粒。</span><br></span></code></pre></div></div>
<p>4、鹌鹑蛋补益五脏，少胆固醇，补脑强记忆力，手不抖。</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">鹌鹑补脑方，3～5个打散，配伍枸杞子一小把，滋补肝肾，黑芝麻粉补肾黑发，蒸成蛋羹，出锅前加点香油即可。</span><br></span></code></pre></div></div>]]></content:encoded>
            <category>exp</category>
        </item>
        <item>
            <title><![CDATA[Atomic Habits]]></title>
            <link>https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic Habits</link>
            <guid>https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic Habits</guid>
            <pubDate>Sat, 10 Jan 2026 00:00:00 GMT</pubDate>
            <description><![CDATA[---]]></description>
            <content:encoded><![CDATA[<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="slug-atomic-habitstitle-原子习惯authors--lianghchao-tags--book-">slug: atomic-habits
title: 原子习惯
authors: [ lianghchao ]
tags: [ book ]<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#slug-atomic-habitstitle-%E5%8E%9F%E5%AD%90%E4%B9%A0%E6%83%AFauthors--lianghchao-tags--book-" class="hash-link" aria-label="Direct link to slug: atomic-habits
title: 原子习惯
authors: [ lianghchao ]
tags: [ book ]" title="Direct link to slug: atomic-habits
title: 原子习惯
authors: [ lianghchao ]
tags: [ book ]" translate="no">​</a></h2>
<p>《原子习惯》（Atomic Habits）是由 James Clear 所著的一本全球畅销书，被誉为"习惯养成领域的圣经"。它不是讲大道理，而是提供了一套科学、可操作、可持续的行为改变系统。</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-核心思想">📚 核心思想<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#-%E6%A0%B8%E5%BF%83%E6%80%9D%E6%83%B3" class="hash-link" aria-label="Direct link to 📚 核心思想" title="Direct link to 📚 核心思想" translate="no">​</a></h2>
<blockquote>
<p>微小的、持续的改进（1% 的提升），在长期复利下会产生惊人的结果。</p>
</blockquote>
<blockquote>
<p>"你不是要达成目标，而是要成为那种能自然达成目标的人。"</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-四大核心法则行为改变的黄金公式">🔑 四大核心法则（行为改变的黄金公式）<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#-%E5%9B%9B%E5%A4%A7%E6%A0%B8%E5%BF%83%E6%B3%95%E5%88%99%E8%A1%8C%E4%B8%BA%E6%94%B9%E5%8F%98%E7%9A%84%E9%BB%84%E9%87%91%E5%85%AC%E5%BC%8F" class="hash-link" aria-label="Direct link to 🔑 四大核心法则（行为改变的黄金公式）" title="Direct link to 🔑 四大核心法则（行为改变的黄金公式）" translate="no">​</a></h2>
<p>James Clear 提出：<strong>习惯 = 提示（Cue） → 渴望（Craving） → 反应（Response） → 奖赏（Reward）</strong></p>
<p>围绕这个循环，他提出 4 条反向设计原则：</p>
<table><thead><tr><th>法则</th><th>目标</th><th>具体策略</th></tr></thead><tbody><tr><td><strong>1. 让提示显而易见</strong><br>（Make it obvious）</td><td>建立好习惯</td><td>- 习惯叠加（"做完 A 之后，我就做 B"）<br>- 设计环境（把水果放桌上，把手机放抽屉）</td></tr><tr><td><strong>2. 让渴望有吸引力</strong><br>（Make it attractive）</td><td>增强动机</td><td>- 绑定喜好（"只有在跑步时才能听播客"）<br>- 加入文化认同（"我是健康生活的人"）</td></tr><tr><td><strong>3. 让行动简便易行</strong><br>（Make it easy）</td><td>降低启动门槛</td><td>- 两分钟规则（"新习惯不超过 2 分钟"）<br>- 减少摩擦（提前准备好运动服）</td></tr><tr><td><strong>4. 让奖赏令人满足</strong><br>（Make it satisfying）</td><td>强化正反馈</td><td>- 即时奖励（打卡打钩、存"习惯币"）<br>- 不要连续错过两次</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>✅ 反过来，想戒掉坏习惯？就做相反的事：<strong>隐藏提示、让它没吸引力、增加难度、制造痛苦后果。</strong></p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-书中经典观点">💡 书中经典观点<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#-%E4%B9%A6%E4%B8%AD%E7%BB%8F%E5%85%B8%E8%A7%82%E7%82%B9" class="hash-link" aria-label="Direct link to 💡 书中经典观点" title="Direct link to 💡 书中经典观点" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-关注体系而非目标">1. 关注体系，而非目标<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#1-%E5%85%B3%E6%B3%A8%E4%BD%93%E7%B3%BB%E8%80%8C%E9%9D%9E%E7%9B%AE%E6%A0%87" class="hash-link" aria-label="Direct link to 1. 关注体系，而非目标" title="Direct link to 1. 关注体系，而非目标" translate="no">​</a></h3>
<ul>
<li class=""><strong>目标</strong>是你想达到的结果（如"减重 10 公斤"）</li>
<li class=""><strong>体系</strong>是你每天执行的流程（如"每天散步 20 分钟"）</li>
</ul>
<blockquote>
<p>"赢球的球队不只盯着冠军奖杯，而是优化训练体系。"</p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-身份认同驱动改变">2. 身份认同驱动改变<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#2-%E8%BA%AB%E4%BB%BD%E8%AE%A4%E5%90%8C%E9%A9%B1%E5%8A%A8%E6%94%B9%E5%8F%98" class="hash-link" aria-label="Direct link to 2. 身份认同驱动改变" title="Direct link to 2. 身份认同驱动改变" translate="no">​</a></h3>
<ul>
<li class="">❌ 不要说："我在戒烟"</li>
<li class="">✅ 要说："我不是吸烟的人"</li>
</ul>
<p><strong>行为改变的最高境界，是身份的转变。</strong></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-1-法则复利效应">3. 1% 法则（复利效应）<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#3-1-%E6%B3%95%E5%88%99%E5%A4%8D%E5%88%A9%E6%95%88%E5%BA%94" class="hash-link" aria-label="Direct link to 3. 1% 法则（复利效应）" title="Direct link to 3. 1% 法则（复利效应）" translate="no">​</a></h3>
<ul>
<li class="">每天进步 1%，一年后 = 1.01³⁶⁵ ≈ <strong>37.8 倍</strong></li>
<li class="">每天退步 1%，一年后 = 0.99³⁶⁵ ≈ <strong>0.03 倍</strong></li>
</ul>
<p>微小的选择，长期决定人生轨迹。</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-两分钟规则">4. 两分钟规则<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#4-%E4%B8%A4%E5%88%86%E9%92%9F%E8%A7%84%E5%88%99" class="hash-link" aria-label="Direct link to 4. 两分钟规则" title="Direct link to 4. 两分钟规则" translate="no">​</a></h3>
<p>任何习惯都可以从"两分钟版本"开始：</p>
<ul>
<li class="">"健身" → "穿上运动鞋"</li>
<li class="">"读书" → "翻开一页书"</li>
</ul>
<p><strong>关键是先开始，行动会带动状态。</strong></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-现实应用举例">🌰 现实应用举例<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#-%E7%8E%B0%E5%AE%9E%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B" class="hash-link" aria-label="Direct link to 🌰 现实应用举例" title="Direct link to 🌰 现实应用举例" translate="no">​</a></h2>
<table><thead><tr><th>场景</th><th>用《原子习惯》怎么做？</th></tr></thead><tbody><tr><td><strong>想坚持写作</strong></td><td>- 环境：书桌只放电脑和笔记本（无手机）<br>- 习惯叠加："喝完早咖啡后，写 200 字"<br>- 两分钟版："打开文档，写一个标题"</td></tr><tr><td><strong>想少吃零食</strong></td><td>- 隐藏提示：不买零食，或藏在高处<br>- 增加摩擦：用密封罐装，贴上"吃前思考 10 秒"标签<br>- 替代奖赏：准备切好的水果</td></tr><tr><td><strong>想早睡</strong></td><td>- 提示：晚上 10 点自动调暗灯光<br>- 身份认同："我是作息规律的人"<br>- 奖赏：睡前读一本轻松的书（非手机）</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-为什么这本书特别值得读">📖 为什么这本书特别值得读？<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%BF%99%E6%9C%AC%E4%B9%A6%E7%89%B9%E5%88%AB%E5%80%BC%E5%BE%97%E8%AF%BB" class="hash-link" aria-label="Direct link to 📖 为什么这本书特别值得读？" title="Direct link to 📖 为什么这本书特别值得读？" translate="no">​</a></h2>
<ul>
<li class="">✅ <strong>基于科学</strong>：融合心理学、神经科学、行为经济学研究（如习惯回路、多巴胺机制）</li>
<li class="">✅ <strong>极度实用</strong>：每章都有具体行动清单，不是空谈</li>
<li class="">✅ <strong>适合所有人</strong>：学生、上班族、创业者、父母都能找到方法</li>
<li class="">✅ 中文版豆瓣评分 <strong>8.3</strong>，英文原版销量超 <strong>1000 万册</strong></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-行动建议">✅ 行动建议<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#-%E8%A1%8C%E5%8A%A8%E5%BB%BA%E8%AE%AE" class="hash-link" aria-label="Direct link to ✅ 行动建议" title="Direct link to ✅ 行动建议" translate="no">​</a></h2>
<div class="theme-admonition theme-admonition-important admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</div><div class="admonitionContent_BuS1"><p>如果你只记住一点，请记住：</p><p><strong>不要追求"大改变"，而是设计一个让你"不知不觉变好"的系统。</strong></p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="想开始今天就可以">想开始？今天就可以：<a href="https://lianghchao.github.io/docs/blog/2026/01/10/2026-01/Atomic%20Habits#%E6%83%B3%E5%BC%80%E5%A7%8B%E4%BB%8A%E5%A4%A9%E5%B0%B1%E5%8F%AF%E4%BB%A5" class="hash-link" aria-label="Direct link to 想开始？今天就可以：" title="Direct link to 想开始？今天就可以：" translate="no">​</a></h3>
<ol>
<li class="">选一个你想培养的小习惯（比如"每天喝水"）</li>
<li class="">用"两分钟规则"简化它（"起床后倒一杯水"）</li>
<li class="">把杯子放在床头（让提示显而易见）</li>
</ol>
<p><strong>改变，从原子大小开始。</strong> 🚀</p>]]></content:encoded>
        </item>
        <item>
            <title><![CDATA[认知带宽理论]]></title>
            <link>https://lianghchao.github.io/docs/blog/Cognitive Bandwidth</link>
            <guid>https://lianghchao.github.io/docs/blog/Cognitive Bandwidth</guid>
            <pubDate>Sat, 10 Jan 2026 00:00:00 GMT</pubDate>
            <description><![CDATA[贫穷/忙碌的本质是“带宽被占用”。]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="贫穷忙碌的本质是带宽被占用">贫穷/忙碌的本质是“带宽被占用”。<a href="https://lianghchao.github.io/docs/blog/Cognitive%20Bandwidth#%E8%B4%AB%E7%A9%B7%E5%BF%99%E7%A2%8C%E7%9A%84%E6%9C%AC%E8%B4%A8%E6%98%AF%E5%B8%A6%E5%AE%BD%E8%A2%AB%E5%8D%A0%E7%94%A8" class="hash-link" aria-label="Direct link to 贫穷/忙碌的本质是“带宽被占用”。" title="Direct link to 贫穷/忙碌的本质是“带宽被占用”。" translate="no">​</a></h2>
<ul>
<li class="">琐事（如账单、日程协调、家务安排）占据大脑 RAM，导致：</li>
<li class="">智商暂时下降（实验显示贫困者 IQ 测试得分低 13 分）</li>
<li class="">更难规划长期目标（如储蓄、学习）</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="如何减少琐事对决策力的侵蚀">如何减少琐事对决策力的侵蚀？<a href="https://lianghchao.github.io/docs/blog/Cognitive%20Bandwidth#%E5%A6%82%E4%BD%95%E5%87%8F%E5%B0%91%E7%90%90%E4%BA%8B%E5%AF%B9%E5%86%B3%E7%AD%96%E5%8A%9B%E7%9A%84%E4%BE%B5%E8%9A%80" class="hash-link" aria-label="Direct link to 如何减少琐事对决策力的侵蚀？" title="Direct link to 如何减少琐事对决策力的侵蚀？" translate="no">​</a></h2>
<ol>
<li class="">建立惯例（Routines）
例子：扎克伯格/乔布斯穿同款衣服 → 消除“穿什么”的决策。
行动建议：
固定起床/睡觉时间
周一到周五午餐吃固定几样
每天上午专注深度工作（不处理邮件）</li>
<li class="">批量处理琐事
把同类小决策集中处理（如每周日晚上规划下周菜单、统一回复非紧急消息）。</li>
<li class="">设置默认选项
自动缴费、订阅常用日用品、用模板回复邮件 → 减少“是否做”的判断。</li>
<li class="">保护高价值时段
把需要创造力/战略思考的工作放在决策精力最充沛时（通常是早晨），避免被琐事打断。</li>
<li class="">学会说“不”
拒绝无关会议、社交邀约、信息流干扰 → 本质是保护决策带宽。</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-一句话总结">💡 一句话总结<a href="https://lianghchao.github.io/docs/blog/Cognitive%20Bandwidth#-%E4%B8%80%E5%8F%A5%E8%AF%9D%E6%80%BB%E7%BB%93" class="hash-link" aria-label="Direct link to 💡 一句话总结" title="Direct link to 💡 一句话总结" translate="no">​</a></h2>
<ul>
<li class="">你每天的“高质量决策次数”是有限的。把它们留给真正重要的事，而不是“选哪个滤镜”或“回哪个群消息”。</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="正如原子习惯作者-james-clear-所说">正如《原子习惯》作者 James Clear 所说：<a href="https://lianghchao.github.io/docs/blog/Cognitive%20Bandwidth#%E6%AD%A3%E5%A6%82%E5%8E%9F%E5%AD%90%E4%B9%A0%E6%83%AF%E4%BD%9C%E8%80%85-james-clear-%E6%89%80%E8%AF%B4" class="hash-link" aria-label="Direct link to 正如《原子习惯》作者 James Clear 所说：" title="Direct link to 正如《原子习惯》作者 James Clear 所说：" translate="no">​</a></h4>
<ul>
<li class="">
<p>“You do not rise to the level of your goals. You fall to the level of your systems.”</p>
</li>
<li class="">
<p>（你不会达到目标的高度，你会跌到系统所允许的水平。）</p>
</li>
<li class="">
<p>而减少琐事干扰，就是优化你的认知系统。</p>
</li>
</ul>]]></content:encoded>
            <category>book</category>
        </item>
        <item>
            <title><![CDATA[灵光一闪]]></title>
            <link>https://lianghchao.github.io/docs/blog/exp</link>
            <guid>https://lianghchao.github.io/docs/blog/exp</guid>
            <pubDate>Wed, 07 Jan 2026 00:00:00 GMT</pubDate>
            <description><![CDATA[记录一下偶尔的灵光一闪]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="记录一下偶尔的灵光一闪">记录一下偶尔的灵光一闪<a href="https://lianghchao.github.io/docs/blog/exp#%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%8B%E5%81%B6%E5%B0%94%E7%9A%84%E7%81%B5%E5%85%89%E4%B8%80%E9%97%AA" class="hash-link" aria-label="Direct link to 记录一下偶尔的灵光一闪" title="Direct link to 记录一下偶尔的灵光一闪" translate="no">​</a></h3>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="惰性思想">惰性思想<a href="https://lianghchao.github.io/docs/blog/exp#%E6%83%B0%E6%80%A7%E6%80%9D%E6%83%B3" class="hash-link" aria-label="Direct link to 惰性思想" title="Direct link to 惰性思想" translate="no">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">放弃对于现实的进行一个艰难的思考，转而拥抱一个现成的简单粗暴的解释框架，并对此深信不疑。</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="滤镜幻觉">滤镜幻觉<a href="https://lianghchao.github.io/docs/blog/exp#%E6%BB%A4%E9%95%9C%E5%B9%BB%E8%A7%89" class="hash-link" aria-label="Direct link to 滤镜幻觉" title="Direct link to 滤镜幻觉" translate="no">​</a></h3>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="救世幻觉">救世幻觉<a href="https://lianghchao.github.io/docs/blog/exp#%E6%95%91%E4%B8%96%E5%B9%BB%E8%A7%89" class="hash-link" aria-label="Direct link to 救世幻觉" title="Direct link to 救世幻觉" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">房子结构有问题，直接推到重建。</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">鲁迅：“从来如此，便对么？”——对宏大叙事保持怀疑。</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="泰勒的科学管理法">泰勒的科学管理法<a href="https://lianghchao.github.io/docs/blog/exp#%E6%B3%B0%E5%8B%92%E7%9A%84%E7%A7%91%E5%AD%A6%E7%AE%A1%E7%90%86%E6%B3%95" class="hash-link" aria-label="Direct link to 泰勒的科学管理法" title="Direct link to 泰勒的科学管理法" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">泰勒的科学管理 = 用科学方法代替经验，用标准化动作+差别激励+计划执行分离，实现效率最大化。</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="宿命幻觉">宿命幻觉<a href="https://lianghchao.github.io/docs/blog/exp#%E5%AE%BF%E5%91%BD%E5%B9%BB%E8%A7%89" class="hash-link" aria-label="Direct link to 宿命幻觉" title="Direct link to 宿命幻觉" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">把一切归咎于命运，实则是逃避选择与责任的自我麻痹。</span><br></span></code></pre></div></div>]]></content:encoded>
            <category>exp</category>
        </item>
        <item>
            <title><![CDATA[过滤器&拦截器]]></title>
            <link>https://lianghchao.github.io/docs/blog/java-filter-interceptor</link>
            <guid>https://lianghchao.github.io/docs/blog/java-filter-interceptor</guid>
            <pubDate>Thu, 01 Jan 2026 00:00:00 GMT</pubDate>
            <description><![CDATA[sping boot中的过滤器&拦截器]]></description>
            <content:encoded><![CDATA[<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="sping-boot中的过滤器拦截器">sping boot中的过滤器&amp;拦截器<a href="https://lianghchao.github.io/docs/blog/java-filter-interceptor#sping-boot%E4%B8%AD%E7%9A%84%E8%BF%87%E6%BB%A4%E5%99%A8%E6%8B%A6%E6%88%AA%E5%99%A8" class="hash-link" aria-label="Direct link to sping boot中的过滤器&amp;拦截器" title="Direct link to sping boot中的过滤器&amp;拦截器" translate="no">​</a></h3>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="mvc交互流程">mvc交互流程<a href="https://lianghchao.github.io/docs/blog/java-filter-interceptor#mvc%E4%BA%A4%E4%BA%92%E6%B5%81%E7%A8%8B" class="hash-link" aria-label="Direct link to mvc交互流程" title="Direct link to mvc交互流程" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">客户端（浏览器）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[1] HTTP 请求（例如：GET /user/profile 或 /static/logo.png）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2] Web 容器（Tomcat / Jetty / Undertow）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[3] 所有已注册的 Filter.doFilter()（按 @Order 顺序执行）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    ← 包括：CharacterEncodingFilter、CorsFilter、自定义 Filter 等</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    ← **静态资源（如 /css/app.css）也会经过此处**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    ┌───────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    │ 在 Filter 中调用 chain.doFilter() │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    └───────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             [4] DispatcherServlet（Spring MVC 前端控制器）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             [5] HandlerMapping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → 尝试匹配 @Controller 中的 @RequestMapping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      ├─ 若匹配成功（如 /user/profile）→ 进入 Spring MVC 流程</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      └─ 若未匹配（如 /static/logo.png）→</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                           直接由 ResourceHttpRequestHandler 处理，</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                           **跳过所有 Interceptor**，但仍会走后续 Filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      ↓（仅对匹配到 Controller 的请求）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             [6] 执行已注册的 Interceptor.preHandle()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → 按 addInterceptor() 注册顺序调用</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → 若任一返回 false，则中断流程，**不调用 Controller**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │    （但仍会执行后续 Filter 的后半部分和 afterCompletion）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             [7] 调用目标 Controller 方法</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → 参数绑定（@RequestParam, @RequestBody 等）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → 执行业务逻辑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             [8] Controller 返回结果</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → ModelAndView（视图） 或 JSON（@RestController）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             [9] 执行 Interceptor.postHandle()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → 可修改 ModelAndView（仅对视图有效）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → **若 Controller 抛异常，此方法不会执行！**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             [10] 视图渲染（ViewResolver → Thymeleaf/JSP）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → 或直接写 JSON 到 HttpServletResponse（REST）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│             [11] 执行 Interceptor.afterCompletion()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → **无论成功或异常，都会执行**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                      │ → 可清理 ThreadLocal、记录日志、关闭资源等</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────↑</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[12] 继续执行 Filter.doFilter() 的后半部分（响应返回阶段）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    ← 所有 Filter 的 doFilter() 方法中 chain.doFilter() 之后的代码</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    ← 例如：记录响应时间、修改响应头、GZIP 压缩等</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[13] HttpServletResponse 完全写回客户端</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">客户端收到 HTML / JSON / 静态文件等响应</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="拦截器">拦截器<a href="https://lianghchao.github.io/docs/blog/java-filter-interceptor#%E6%8B%A6%E6%88%AA%E5%99%A8" class="hash-link" aria-label="Direct link to 拦截器" title="Direct link to 拦截器" translate="no">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 登录拦截器：拦截需要登录的接口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class LoginInterceptor implements HandlerInterceptor { // 改为 static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public boolean preHandle(HttpServletRequest request,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 HttpServletResponse response,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Object handler) throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String uri = request.getRequestURI();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("LoginInterceptor 拦截请求: {}", uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 只处理 Controller 请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!(handler instanceof HandlerMethod)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 模拟未登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String authHeader = request.getHeader("Authorization");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (authHeader == null || !authHeader.startsWith("Bearer ")) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                log.warn("未登录，拒绝访问: {}", uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.setContentType("application/json;charset=utf-8");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.getWriter().write("{\"code\":401, \"msg\":\"请先登录\"}");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("LoginInterceptor 拦截请求完成: {}", response.getStatus());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HandlerInterceptor.super.afterCompletion(request, response, handler, ex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="拦截器注册">拦截器注册<a href="https://lianghchao.github.io/docs/blog/java-filter-interceptor#%E6%8B%A6%E6%88%AA%E5%99%A8%E6%B3%A8%E5%86%8C" class="hash-link" aria-label="Direct link to 拦截器注册" title="Direct link to 拦截器注册" translate="no">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class WebConfig implements WebMvcConfigurer { </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private LoginInterceptor loginInterceptor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void addInterceptors(InterceptorRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // 拦截所有，但排除 /public/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        registry.addInterceptor(loginInterceptor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .addPathPatterns("/**")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .excludePathPatterns("/public/**");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="过滤器">过滤器<a href="https://lianghchao.github.io/docs/blog/java-filter-interceptor#%E8%BF%87%E6%BB%A4%E5%99%A8" class="hash-link" aria-label="Direct link to 过滤器" title="Direct link to 过滤器" translate="no">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 自定义 Filter 1：记录所有请求（包括静态资源）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Order(1) // 优先级高（数字小）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public static class MyCustomFilter implements Filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        HttpServletRequest req = (HttpServletRequest) request;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info("&gt;&gt;&gt; MyCustomFilter 开始: {}", req.getRequestURI());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String token = req.getHeader("Authorization");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (token != null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 进入程序</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            chain.doFilter(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 模拟未登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.warn("未登录，拒绝访问: {}", req.getRequestURI());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HttpServletResponse httpResponse = (HttpServletResponse) response;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            httpResponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            httpResponse.setContentType("application/json;charset=utf-8");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            httpResponse.getWriter().write("{\"code\":401, \"msg\":\"请先登录\"}");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        log.info("&lt;&lt;&lt; MyCustomFilter 结束: {}", req.getRequestURI());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="完整代码">完整代码<a href="https://lianghchao.github.io/docs/blog/java-filter-interceptor#%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81" class="hash-link" aria-label="Direct link to 完整代码" title="Direct link to 完整代码" translate="no">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class MvcTestApplication {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        SpringApplication.run(MvcTestApplication.class, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Slf4j</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @RestController</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class MyController {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @GetMapping("/test")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public String index1() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("访问 /test");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return "Hello MyController!";</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @GetMapping("/public/test")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public String index2() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("访问 /public/test");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return "Hello Public!";</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @PostMapping("/test2")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public String index3() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("访问 /test2 (POST)");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return "Hello POST!";</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 登录拦截器：拦截需要登录的接口</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class LoginInterceptor implements HandlerInterceptor { // 改为 static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public boolean preHandle(HttpServletRequest request,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 HttpServletResponse response,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Object handler) throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String uri = request.getRequestURI();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("LoginInterceptor 拦截请求: {}", uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 只处理 Controller 请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!(handler instanceof HandlerMethod)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 模拟未登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String authHeader = request.getHeader("Authorization");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (authHeader == null || !authHeader.startsWith("Bearer ")) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                log.warn("未登录，拒绝访问: {}", uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.setContentType("application/json;charset=utf-8");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.getWriter().write("{\"code\":401, \"msg\":\"请先登录\"}");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("LoginInterceptor 拦截请求完成: {}", response.getStatus());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HandlerInterceptor.super.afterCompletion(request, response, handler, ex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class LoginInterceptor2 implements HandlerInterceptor { // 改为 static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public boolean preHandle(HttpServletRequest request,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 HttpServletResponse response,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                 Object handler) throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String uri = request.getRequestURI();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("LoginInterceptor2 拦截请求: {}", uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 只处理 Controller 请求</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (!(handler instanceof HandlerMethod)) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 模拟未登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String authHeader = request.getHeader("Authorization");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (authHeader == null || !authHeader.startsWith("Bearer ")) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                log.warn("未登录，拒绝访问: {}", uri);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.setContentType("application/json;charset=utf-8");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                response.getWriter().write("{\"code\":401, \"msg\":\"请先登录\"}");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                return false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("LoginInterceptor2 拦截请求完成: {}", response.getStatus());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HandlerInterceptor.super.afterCompletion(request, response, handler, ex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class WebConfig implements WebMvcConfigurer { // 改为 static</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private LoginInterceptor loginInterceptor;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Autowired</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private LoginInterceptor2 loginInterceptor2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void addInterceptors(InterceptorRegistry registry) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // 拦截所有，但排除 /public/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            registry.addInterceptor(loginInterceptor)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .addPathPatterns("/**")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .excludePathPatterns("/public/**");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            registry.addInterceptor(loginInterceptor2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .addPathPatterns("/**")</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .excludePathPatterns("/public/**");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 自定义 Filter 1：记录所有请求（包括静态资源）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Order(1) // 优先级高（数字小）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class MyCustomFilter implements Filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HttpServletRequest req = (HttpServletRequest) request;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("&gt;&gt;&gt; MyCustomFilter 开始: {}", req.getRequestURI());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            String token = req.getHeader("Authorization");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (token != null){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 进入程序</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                chain.doFilter(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // 模拟未登录</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                log.warn("未登录，拒绝访问: {}", req.getRequestURI());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                HttpServletResponse httpResponse = (HttpServletResponse) response;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                httpResponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                httpResponse.setContentType("application/json;charset=utf-8");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                httpResponse.getWriter().write("{\"code\":401, \"msg\":\"请先登录\"}");</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("&lt;&lt;&lt; MyCustomFilter 结束: {}", req.getRequestURI());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * 自定义 Filter 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Order(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class MyCustomFilter2 implements Filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throws IOException, ServletException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HttpServletRequest req = (HttpServletRequest) request;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("&gt;&gt;&gt; MyCustomFilter2 开始: {}", req.getRequestURI());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            chain.doFilter(request, response);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            log.info("&lt;&lt;&lt; MyCustomFilter2 结束: {}", req.getRequestURI());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>]]></content:encoded>
            <category>Java</category>
            <category>filter</category>
            <category>interceptor</category>
        </item>
        <item>
            <title><![CDATA[GitHub Workflow]]></title>
            <link>https://lianghchao.github.io/docs/blog/server-github-workflow</link>
            <guid>https://lianghchao.github.io/docs/blog/server-github-workflow</guid>
            <pubDate>Sun, 28 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[GitHub Pages 静态网站托管服务]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="github-pages-静态网站托管服务">GitHub Pages 静态网站托管服务<a href="https://lianghchao.github.io/docs/blog/server-github-workflow#github-pages-%E9%9D%99%E6%80%81%E7%BD%91%E7%AB%99%E6%89%98%E7%AE%A1%E6%9C%8D%E5%8A%A1" class="hash-link" aria-label="Direct link to GitHub Pages 静态网站托管服务" title="Direct link to GitHub Pages 静态网站托管服务" translate="no">​</a></h2>
<ul>
<li class="">github自动化构建工作流</li>
<li class="">在项目根目录下创建文件<code>.github/workflows/deploy.yml</code>,格式如下</li>
</ul>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># .github/workflows/deploy.yml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deploy to GitHub Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> master </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 当 master 分支有推送时触发</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">deploy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Checkout</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Setup pnpm</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pnpm/action</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">setup@v4  </span><span class="token comment" style="color:#999988;font-style:italic"># 👈 关键！官方 pnpm 安装器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># 可选：指定版本，不写则用最新</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Setup Node</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">node@v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">node-version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'22'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">cache</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">'pnpm'</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Install dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pnpm i</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pnpm run build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deploy to GitHub Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> peaceiris/actions</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pages@v4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">github_token</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">publish_dir</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ./dist</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>]]></content:encoded>
            <category>服务器</category>
            <category>GitHub</category>
            <category>workflow</category>
        </item>
        <item>
            <title><![CDATA[手机搭服务器]]></title>
            <link>https://lianghchao.github.io/docs/blog/test</link>
            <guid>https://lianghchao.github.io/docs/blog/test</guid>
            <pubDate>Sat, 27 Dec 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[使用安卓手机搭建服务器教程]]></description>
            <content:encoded><![CDATA[<p>使用安卓手机搭建服务器教程</p>
<ol>
<li class="">
<p>DDNS动态域名解析服务</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">curl -X GET "https://dynupdate.no-ip.com/nic/update?hostname=yourhostname&amp;myip=yourIp" -u "yourmail:yourpassword" -H "User-Agent: MyUpdater/1.0"</span><br></span></code></pre></div></div>
<ul>
<li class="">成功 返回信息good XXX</li>
</ul>
</li>
<li class="">
<p>传输文件到手机</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">scp -P 8022 dist.zip u0_a698@yourip:/sdcard/download/</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>termux前台运行caddy</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">caddy run --config ~/Caddyfile</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>查看caddy运行状态</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ps aux | grep caddy</span><br></span></code></pre></div></div>
<ul>
<li class="">关闭进程</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kill -9 32518</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>修改Redis配置文件</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$PREFIX/etc/redis.conf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sed -i 's/# requirepass foobared/requirepass drlhc$PREFIX/etc/redis.conf'</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>termux后台运行应用</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tmux new-session -d -s caddy 'caddy run --config ~/Caddyfile'</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tmux new-session -d -s ruoyi-admin 'java -jar ruoyi-admin.jar  --server.address=0.0.0.0'</span><br></span></code></pre></div></div>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tmux new-session -d -s redis 'redis-server $PREFIX/etc/redis.conf'</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>termux查看运行日志</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tmux capture-pane -t ruoyi-admin -pS -100</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>关闭程序</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tmux kill-session -t caddy</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>解压到指定路径</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tar -xzf frp_0.52.3_linux_arm64.tar.gz -C ~/program</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>创建文件夹</p>
</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir ~/program</span><br></span></code></pre></div></div>
<ol start="11">
<li class="">创建目录（如果不存在）</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">mkdir -p $PREFIX/etc/apt</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="换源公钥不见了以下是解决公钥丢失下载的安装文件">换源公钥不见了，以下是解决公钥丢失下载的安装文件<a href="https://lianghchao.github.io/docs/blog/test#%E6%8D%A2%E6%BA%90%E5%85%AC%E9%92%A5%E4%B8%8D%E8%A7%81%E4%BA%86%E4%BB%A5%E4%B8%8B%E6%98%AF%E8%A7%A3%E5%86%B3%E5%85%AC%E9%92%A5%E4%B8%A2%E5%A4%B1%E4%B8%8B%E8%BD%BD%E7%9A%84%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6" class="hash-link" aria-label="Direct link to 换源公钥不见了，以下是解决公钥丢失下载的安装文件" title="Direct link to 换源公钥不见了，以下是解决公钥丢失下载的安装文件" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="写入清华源">写入清华源<a href="https://lianghchao.github.io/docs/blog/test#%E5%86%99%E5%85%A5%E6%B8%85%E5%8D%8E%E6%BA%90" class="hash-link" aria-label="Direct link to 写入清华源" title="Direct link to 写入清华源" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">echo "deb https://mirrors.aliyun.com/termux/termux-main" &gt; $PREFIX/etc/apt/sources.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl -O https://packages-cf.termux.dev/apt/termux-main/pool/main/libg/libgpg-error/libgpg-error_1.55-1_aarch64.deb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>]]></content:encoded>
            <category>服务器</category>
            <category>Java</category>
            <category>Caddy</category>
            <category>Termux</category>
        </item>
        <item>
            <title><![CDATA[内网穿透]]></title>
            <link>https://lianghchao.github.io/docs/blog/server-ssh-frp</link>
            <guid>https://lianghchao.github.io/docs/blog/server-ssh-frp</guid>
            <pubDate>Sun, 31 Aug 2025 00:00:00 GMT</pubDate>
            <description><![CDATA[在查看服务器查看8001端口映射]]></description>
            <content:encoded><![CDATA[<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="在查看服务器查看8001端口映射">在查看服务器查看8001端口映射<a href="https://lianghchao.github.io/docs/blog/server-ssh-frp#%E5%9C%A8%E6%9F%A5%E7%9C%8B%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9F%A5%E7%9C%8B8001%E7%AB%AF%E5%8F%A3%E6%98%A0%E5%B0%84" class="hash-link" aria-label="Direct link to 在查看服务器查看8001端口映射" title="Direct link to 在查看服务器查看8001端口映射" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">netstat -anp|grep 8001</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="编辑配置文件内容">编辑配置文件内容<a href="https://lianghchao.github.io/docs/blog/server-ssh-frp#%E7%BC%96%E8%BE%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9" class="hash-link" aria-label="Direct link to 编辑配置文件内容" title="Direct link to 编辑配置文件内容" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">vi /usr/etc/ssh/sshd_config</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Getwayports yes</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="重启sshd">重启sshd<a href="https://lianghchao.github.io/docs/blog/server-ssh-frp#%E9%87%8D%E5%90%AFsshd" class="hash-link" aria-label="Direct link to 重启sshd" title="Direct link to 重启sshd" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">systemctl restart sshd</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="ssh">ssh<a href="https://lianghchao.github.io/docs/blog/server-ssh-frp#ssh" class="hash-link" aria-label="Direct link to ssh" title="Direct link to ssh" translate="no">​</a></h2>
<ul>
<li class="">通过SSH将本地端口（192.168.1.5:8085）映射到服务器（@serverIP）所有IP端口（0.0.0.0:8001）</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -R 0.0.0.0:8001:192.168.1.5:8085 root@serverIP</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -R 0.0.0.0:8001:192.168.1.5:8085 root@serverIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh -R 0.0.0.0:8005:192.168.1.7:8003 root@serverIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh -p 8022 -R 0.0.0.0:8001:127.0.0.1:8001 root@serverIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ssh -R 0.0.0.0:7022:0.0.0.0:7022 root@serverIP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo 1 &gt;/proc/sys/net/ipv4/ip_forward</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -t nat -A PREROUTING -d 【公网地址】 -p tcp -m tcp --dport 【公网端口】 -j DNAT --to-destination 【内网IP】:【内网端口】</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">iptables -t nat -A PREROUTING -d serverIP -p tcp -m tcp --dport 3306 -j DNAT --to-destination 192.168.1.141:3306</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="文件服务器映射">文件服务器映射<a href="https://lianghchao.github.io/docs/blog/server-ssh-frp#%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%98%A0%E5%B0%84" class="hash-link" aria-label="Direct link to 文件服务器映射" title="Direct link to 文件服务器映射" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ssh -R 0.0.0.0:21:192.168.1.3:21 root@serverIP</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="frp服务器配置">frp服务器配置<a href="https://lianghchao.github.io/docs/blog/server-ssh-frp#frp%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE" class="hash-link" aria-label="Direct link to frp服务器配置" title="Direct link to frp服务器配置" translate="no">​</a></h2>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">bindAddr = "0.0.0.0"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bindPort = 7000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HTTP 端口（用于内网 HTTP 代理穿透）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vhostHTTPPort = 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># HTTPS 端口（用于内网 HTTPS 代理穿透）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vhostHTTPSPort = 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 监控界面监听地址（`0.0.0.0` 代表所有 IP 可访问）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">webServer.addr = "0.0.0.0"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Web 管理面板端口（可在浏览器访问，默认 7500）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 你可以通过 `http://你的公网IP:7500` 访问 FRP 管理面板</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">webServer.port = 7500</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Web 控制台管理账号（可自定义）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">webServer.user = "admin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Web 控制台密码（请自行修改）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">webServer.password = "admin"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># =============================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 身份验证（Authentication）配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># =============================================</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  认证方式（防止未经授权的客户端连接）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 目前 FRP 支持 `token` 和 `oidc` 方式，我们选用token</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth.method = "token"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#  Token 认证（客户端需要匹配相同 token 才能连接）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 通俗来说就是密码，写一个你能记住的，尽量长一点</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 示例: 123-abc-123abc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth.token = "frptoken"   # 请自行修改，不要用我的</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="frp客户端配置">frp客户端配置<a href="https://lianghchao.github.io/docs/blog/server-ssh-frp#frp%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE" class="hash-link" aria-label="Direct link to frp客户端配置" title="Direct link to frp客户端配置" translate="no">​</a></h2>
<div class="language-config codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-config codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># 服务端地址（这里要填你有公网IP的服务器的IP或者是服务器的域名）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#serverAddr = "152.32.175.238"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">serverAddr = "serverIp"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 服务器端口（Frp 服务端监听的端口）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">serverPort = 7000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 连接协议</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">transport.protocol = "tcp"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 认证方式</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth.method = "token"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 认证所使用的 Token（要和你刚才配置的服务端token完全一样！）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">auth.token = "frptoken"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 代理配置</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[[proxies]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 代理名称(标识该代理的名称，根据你的喜好填写）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">name = "rocketcat"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 代理类型（http、https、tcp等）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 这里要根据你的需求来填写，如果你有域名，就用http</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 如果你没有域名，那就用IP直连，例如:165.0.0.1:8848,此时这里应该写tcp协议</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 如果你用tcp协议就必须把刚才服务端上subDomainHost = "xxxx.com"的配置删除！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># type = "tcp"   # IP+端口直连用这个</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">type = "tcp"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 本地 IP（Frp 客户端需要将流量转发到的本地地址）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localIP = "127.0.0.1"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 本地端口（Frp 客户端需要将流量转发到的本地端口，根据你要穿透的端口来填写）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">localPort = 8001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 访问此代理的子域名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 如果你没有域名要用IP直连，请把这句删除掉，否则会导致无法连接！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># subdomain = "rocket" # 子域名请根据你拥有的域名配置，配置后通过rocket.xxx.com格式访问</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 如果你不用域名，要用ip+端口直连，请必须加上这句！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 并且删除 subdomain = "rocket"</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">remotePort = 8001    # 这个端口和localPort 配置的一模一样，这样才能正常访问！</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>]]></content:encoded>
            <category>服务器</category>
            <category>ssh</category>
            <category>frp</category>
        </item>
        <item>
            <title><![CDATA[欢迎]]></title>
            <link>https://lianghchao.github.io/docs/blog/welcome</link>
            <guid>https://lianghchao.github.io/docs/blog/welcome</guid>
            <pubDate>Thu, 26 Aug 2021 00:00:00 GMT</pubDate>
            <description><![CDATA[Docusaurus blogging features are powered by the blog plugin.]]></description>
            <content:encoded><![CDATA[<p><a href="https://docusaurus.io/docs/blog" target="_blank" rel="noopener noreferrer" class="">Docusaurus blogging features</a> are powered by the <a href="https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-content-blog" target="_blank" rel="noopener noreferrer" class="">blog plugin</a>.</p>
<p>Here are a few tips you might find useful.</p>
<p>Simply add Markdown files (or folders) to the <code>blog</code> directory.</p>
<p>Regular blog authors can be added to <code>authors.yml</code>.</p>
<p>The blog post date can be extracted from filenames, such as:</p>
<ul>
<li class=""><code>2019-05-30-welcome.md</code></li>
<li class=""><code>2019-05-30-welcome/index.md</code></li>
</ul>
<p>A blog post folder can be convenient to co-locate blog post images:</p>
<p><img decoding="async" loading="lazy" alt="Docusaurus Plushie" src="https://lianghchao.github.io/docs/assets/images/docusaurus-plushie-banner-a60f7593abca1e3eef26a9afa244e4fb.jpeg" width="1500" height="500" class="img_ev3q"></p>
<p>The blog supports tags as well!</p>
<p><strong>And if you don't want a blog</strong>: just delete this directory, and use <code>blog: false</code> in your Docusaurus config.</p>]]></content:encoded>
            <category>facebook</category>
            <category>hello</category>
            <category>docusaurus</category>
        </item>
        <item>
            <title><![CDATA[长博文]]></title>
            <link>https://lianghchao.github.io/docs/blog/long-blog-post</link>
            <guid>https://lianghchao.github.io/docs/blog/long-blog-post</guid>
            <pubDate>Wed, 29 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[This is the summary of a very long blog post,]]></description>
            <content:encoded><![CDATA[<p>This is the summary of a very long blog post,</p>
<p>Use a <code>&lt;!--</code> <code>truncate</code> <code>--&gt;</code> comment to limit blog post size in the list view.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>]]></content:encoded>
            <category>hello</category>
            <category>docusaurus</category>
        </item>
        <item>
            <title><![CDATA[第一个博客]]></title>
            <link>https://lianghchao.github.io/docs/blog/first-blog-post</link>
            <guid>https://lianghchao.github.io/docs/blog/first-blog-post</guid>
            <pubDate>Tue, 28 May 2019 00:00:00 GMT</pubDate>
            <description><![CDATA[Lorem ipsum dolor sit amet...]]></description>
            <content:encoded><![CDATA[<p>Lorem ipsum dolor sit amet...</p>
<p>...consectetur adipiscing elit. Pellentesque elementum dignissim ultricies. Fusce rhoncus ipsum tempor eros aliquam consequat. Lorem ipsum dolor sit amet</p>]]></content:encoded>
            <category>hola</category>
            <category>docusaurus</category>
        </item>
    </channel>
</rss>