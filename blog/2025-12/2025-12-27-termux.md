---
slug: test
title: 手机搭服务器
authors: [ lianghchao ]
tags: [ server,java,caddy,termux ]
---

使用安卓手机搭建服务器教程

<!-- truncate -->

1. DDNS动态域名解析服务
    ```bash
    curl -X GET "https://dynupdate.no-ip.com/nic/update?hostname=yourhostname&myip=yourIp" -u "yourmail:yourpassword" -H "User-Agent: MyUpdater/1.0"
    ```

    - 成功 返回信息good XXX

2. 传输文件到手机
   ```bash
   scp -P 8022 dist.zip u0_a698@yourip:/sdcard/download/
   ```

3. termux前台运行caddy
   ```bash
   caddy run --config ~/Caddyfile
   ```

4. 查看caddy运行状态
   ```bash
   ps aux | grep caddy
   ```
   - 关闭进程
   ```bash
   kill -9 32518
   ```

5. 修改Redis配置文件
   ```bash
   $PREFIX/etc/redis.conf
   sed -i 's/# requirepass foobared/requirepass drlhc$PREFIX/etc/redis.conf'
   ```

6. termux后台运行应用
   ```bash
   tmux new-session -d -s caddy 'caddy run --config ~/Caddyfile'
   ```
   ```bash   
   tmux new-session -d -s ruoyi-admin 'java -jar ruoyi-admin.jar  --server.address=0.0.0.0'
   ```
   ```shell
   tmux new-session -d -s redis 'redis-server $PREFIX/etc/redis.conf'
   ```
7. termux查看运行日志
   ```bash
   tmux capture-pane -t ruoyi-admin -pS -100
   ```

8. 关闭程序
   
   ```bash
   tmux kill-session -t caddy
   ```

9. 解压到指定路径
   
   ```shell
   tar -xzf frp_0.52.3_linux_arm64.tar.gz -C ~/program
   ```

10. 创建文件夹

   ```bash
   mkdir ~/program
   ```

11. 创建目录（如果不存在）

   ```bash
   mkdir -p $PREFIX/etc/apt
   ```

## 换源公钥不见了，以下是解决公钥丢失下载的安装文件

### 写入清华源

```bash
echo "deb https://mirrors.aliyun.com/termux/termux-main" > $PREFIX/etc/apt/sources.list
curl -O https://packages-cf.termux.dev/apt/termux-main/pool/main/libg/libgpg-error/libgpg-error_1.55-1_aarch64.deb

```