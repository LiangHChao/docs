---
slug: server-termux
title: 手机搭建服务器
authors: [ lianghchao ]
tags: [ server,java,caddy,termux ]
---

使用安卓手机搭建服务器教程

<!-- truncate -->

-  安装caddy
-  创建Caddyfile
-  安装java

### DDNS动态域名解析服务
```bash
curl -X GET "https://dynupdate.no-ip.com/nic/update?hostname=yourhostname&myip=yourIp" -u "yourmail:yourpassword" -H "User-Agent: MyUpdater/1.0"
```
- 成功 返回信息good XXX

### 传输文件到手机
```bash
# 对应storage/downloads
scp -P 8022 dist.zip u0_a698@yourip:/sdcard/download/
```

### termux前台运行caddy
```bash
caddy run --config ~/Caddyfile
```

### 查看caddy运行状态
```bash
ps aux | grep caddy
```
- 关闭进程
 ```bash
 kill -9 32518
 ```

### 修改Redis配置文件
   ```bash
   $PREFIX/etc/redis.conf
   sed -i 's/# requirepass foobared/requirepass drlhc$PREFIX/etc/redis.conf'
   ```

### termux后台运行应用
   ```bash
   tmux new-session -d -s caddy 'caddy run --config ~/Caddyfile'
   ```
   ```bash   
   tmux new-session -d -s ruoyi-admin 'java -jar ruoyi-admin.jar  --server.address=0.0.0.0'
   ```
   ```shell
   tmux new-session -d -s redis 'redis-server $PREFIX/etc/redis.conf'
   ```
### termux查看运行日志
   ```bash
   tmux capture-pane -t ruoyi-admin -pS -100
   ```

### 关闭程序
   
   ```bash
   tmux kill-session -t caddy
   ```

### 解压文件到指定路径
   
   ```shell
   tar -xzf frp_0.52.3_linux_arm64.tar.gz -C ~/program
   ```

### 创建文件夹

   ```bash
   mkdir ~/program
   ```

### 创建目录（如果不存在）

   ```bash
   mkdir -p $PREFIX/etc/apt
   ```
### 复制文件

#### 1. 复制单个文件到目录
```bash  
cp -v file.txt /path/to/target/
```


#### 2. 复制整个文件夹到另一个目录
```bash  
cp -rv source_folder/ /path/to/destination/
```


#### 3. 复制当前目录所有内容（含子目录，不含隐藏文件）到目标目录
```bash  
cp -rv ./* /path/to/target/
```


#### 4. 【推荐】复制当前目录所有内容（含隐藏文件）→ 用 rsync
```bash  
rsync -av ./ /path/to/target/
```

### 换源公钥不见了，以下是解决公钥丢失下载的安装文件

#### 写入清华源

```bash
echo "deb https://mirrors.aliyun.com/termux/termux-main" > $PREFIX/etc/apt/sources.list
curl -O https://packages-cf.termux.dev/apt/termux-main/pool/main/libg/libgpg-error/libgpg-error_1.55-1_aarch64.deb

```