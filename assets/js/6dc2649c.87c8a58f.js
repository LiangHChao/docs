"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[9272],{8364(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"test/2026-01-02-java-test","title":"spring \u96c6\u6210\u6d4b\u8bd5","description":"\u96c6\u6210\u6d4b\u8bd5","source":"@site/javadoc/test/2026-01-02-java-test.md","sourceDirName":"test","slug":"/test/java-test","permalink":"/docs/javadoc/test/java-test","draft":false,"unlisted":false,"editUrl":"https://github.com/LiangHChao/docs/edit/master/javadoc/test/2026-01-02-java-test.md","tags":[{"inline":true,"label":"java","permalink":"/docs/javadoc/tags/java"},{"inline":true,"label":"spring","permalink":"/docs/javadoc/tags/spring"},{"inline":true,"label":"test","permalink":"/docs/javadoc/tags/test"}],"version":"current","frontMatter":{"slug":"java-test","title":"spring \u96c6\u6210\u6d4b\u8bd5","authors":["lianghchao"],"tags":["java","spring","test"]},"sidebar":"javaSidebar","previous":{"title":"spring \u96c6\u6210\u6d4b\u8bd5","permalink":"/docs/javadoc/category/spring-\u96c6\u6210\u6d4b\u8bd5"},"next":{"title":"DDNS","permalink":"/docs/javadoc/category/ddns"}}');var r=n(4848),a=n(8453);const o={slug:"java-test",title:"spring \u96c6\u6210\u6d4b\u8bd5",authors:["lianghchao"],tags:["java","spring","test"]},i=void 0,l={},d=[{value:"\u96c6\u6210\u6d4b\u8bd5",id:"\u96c6\u6210\u6d4b\u8bd5",level:3},{value:"\u5176\u4ed6\u5e38\u7528\u6d4b\u8bd5\u6ce8\u89e3",id:"\u5176\u4ed6\u5e38\u7528\u6d4b\u8bd5\u6ce8\u89e3",level:3}];function c(e){const t={code:"code",h3:"h3",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h3,{id:"\u96c6\u6210\u6d4b\u8bd5",children:"\u96c6\u6210\u6d4b\u8bd5"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-java",children:'@Slf4j\n@TestConfiguration// \u5f00\u542f\u901a\u8fc7@Bean\u66ff\u6362\u539f\u6709Bean\n@ActiveProfiles("dev")//  \u6307\u5b9a\u73af\u5883\n@TestPropertySource(properties = {\n        "logging.pattern.console=%d{YYYY-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n",\n        "logging.level.root=INFO"\n})// \u4fee\u6539\u914d\u7f6e\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)// \u968f\u673a\u7aef\u53e3\u907f\u514d\u51b2\u7a81\n@TestMethodOrder(MethodOrderer.OrderAnnotation.class) // \u63a7\u5236\u6d4b\u8bd5\u987a\u5e8f\uff08\u53ef\u9009\uff09\nclass ProxyApplicationTests {\n    @Autowired\n    private TestRestTemplate restTemplate; // \u7528\u4e8e\u53d1\u8d77 HTTP \u8bf7\u6c42\n\n    @BeforeEach\n    void setUp() {\n        // \u6bcf\u4e2a\u6d4b\u8bd5\u524d\u6267\u884c\n    }\n\n    @Test\n    @Order(1)\n    @DisplayName("\u7528\u6237\u540d\u83b7\u53d6\u7528\u6237\u5217\u8868\u6d41\u7a0b")\n    void contextLoads() {\n        log.info("\u6d4b\u8bd5\u5f00\u59cb");\n\n        // \u7b2c\u4e00\u6b65 GET \u8bf7\u6c42\n        ResponseEntity<User> response = restTemplate.exchange(\n                "/test?name=\u5f20\u4e09",\n                HttpMethod.GET,\n                HttpEntity.EMPTY,\n                new ParameterizedTypeReference<User>() {}\n        );\n        assertThat(response.getStatusCode()).isEqualTo(HttpStatus.OK);//  \u65ad\u8a00 HTTP \u72b6\u6001\u7801\n        assertThat(response.getBody()).isNotEqualTo(null);\n        assertThat(response.getBody().getName()).isEqualTo("\u5f20\u4e09");\n\n        User user = response.getBody();\n        log.info("\u7528\u6237: {}", user);\n\n        //  \u7b2c\u4e8c\u6b65 POST \u8bf7\u6c42\n        HttpEntity<User> request2 = new HttpEntity<>(user);\n        ResponseEntity<List<User>> response2 = restTemplate.exchange(\n                "/test2",\n                HttpMethod.POST,\n                request2,\n                new ParameterizedTypeReference<List<User>>() {}\n        );\n\n        assertThat(response2.getStatusCode()).isEqualTo(HttpStatus.OK);//  \u65ad\u8a00 HTTP \u72b6\u6001\u7801\n        assertThat(response2.getBody()).asList().isNotEmpty();\n        final List<User> body = response2.getBody();\n        log.info( "\u7528\u6237\u5217\u8868: {}", body);\n\n        log.info("\u6d4b\u8bd5\u7ed3\u675f");\n    }\n\n}\n\n'})}),"\n",(0,r.jsx)(t.h3,{id:"\u5176\u4ed6\u5e38\u7528\u6d4b\u8bd5\u6ce8\u89e3",children:"\u5176\u4ed6\u5e38\u7528\u6d4b\u8bd5\u6ce8\u89e3"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"\u6ce8\u89e3"}),(0,r.jsx)(t.th,{style:{textAlign:"center"},children:"\u7528\u9014"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"@TestConfiguration"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"\u5728\u6d4b\u8bd5\u4e2d\u5b9a\u4e49\u989d\u5916\u7684 Bean"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"@TestPropertySource"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"\u8986\u76d6\u914d\u7f6e\uff08\u5982 application-test.properties\uff09"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"center"},children:'@ActiveProfiles("test")'}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"\u6fc0\u6d3b test profile"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"@DirtiesContext"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"\u6d4b\u8bd5\u540e\u91cd\u7f6e Spring \u4e0a\u4e0b\u6587\uff08\u614e\u7528\uff09"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"@AutoConfigureTestDatabase"}),(0,r.jsx)(t.td,{style:{textAlign:"center"},children:"\u63a7\u5236\u662f\u5426\u4f7f\u7528\u5185\u5b58\u6570\u636e\u5e93"})]})]})]})]})}function p(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,t,n){n.d(t,{R:()=>o,x:()=>i});var s=n(6540);const r={},a=s.createContext(r);function o(e){const t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);