"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3964],{5717(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>v,frontMatter:()=>s,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"design pattern/2026-01-02-Observer","title":"\u89c2\u5bdf\u8005\u6a21\u5f0f","description":"\u89c2\u5bdf\u8005\u6a21\u5f0f","source":"@site/javadoc/design pattern/2026-01-02-Observer.md","sourceDirName":"design pattern","slug":"/design pattern/java-Observer-patterns","permalink":"/docs/javadoc/design pattern/java-Observer-patterns","draft":false,"unlisted":false,"editUrl":"https://github.com/LiangHChao/docs/edit/master/javadoc/design pattern/2026-01-02-Observer.md","tags":[{"inline":true,"label":"java","permalink":"/docs/javadoc/tags/java"},{"inline":true,"label":"design patterns","permalink":"/docs/javadoc/tags/design-patterns"}],"version":"current","frontMatter":{"slug":"java-Observer-patterns","title":"\u89c2\u5bdf\u8005\u6a21\u5f0f","authors":["lianghchao"],"tags":["java","design patterns"]},"sidebar":"javaSidebar","previous":{"title":"spring boot\u4e2d\u5e38\u89c1\u7684\u8bbe\u8ba1\u6a21\u5f0f","permalink":"/docs/javadoc/design pattern/java-design patterns-spring boot"},"next":{"title":"\u4ee3\u7406\u6a21\u5f0f","permalink":"/docs/javadoc/design pattern/java-Proxy Pattern"}}');var i=r(4848),a=r(8453);const s={slug:"java-Observer-patterns",title:"\u89c2\u5bdf\u8005\u6a21\u5f0f",authors:["lianghchao"],tags:["java","design patterns"]},d=void 0,c={},l=[{value:"\u89c2\u5bdf\u8005\u6a21\u5f0f",id:"\u89c2\u5bdf\u8005\u6a21\u5f0f",level:3},{value:"\u5b9a\u4e49\u4e8b\u4ef6",id:"\u5b9a\u4e49\u4e8b\u4ef6",level:3},{value:"\u53d1\u5e03\u4e8b\u4ef6",id:"\u53d1\u5e03\u4e8b\u4ef6",level:3},{value:"\u76d1\u542c\u5668",id:"\u76d1\u542c\u5668",level:3},{value:"\u76d1\u542c\u5668",id:"\u76d1\u542c\u5668-1",level:4},{value:"\u76d1\u542c\u5668",id:"\u76d1\u542c\u5668-2",level:4},{value:"\u5b8c\u6574\u4ee3\u7801",id:"\u5b8c\u6574\u4ee3\u7801",level:3}];function o(e){const n={code:"code",h3:"h3",h4:"h4",li:"li",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h3,{id:"\u89c2\u5bdf\u8005\u6a21\u5f0f",children:"\u89c2\u5bdf\u8005\u6a21\u5f0f"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\u89c2\u5bdf\u8005\u6a21\u5f0f\uff0c\u4e5f\u53eb\u53d1\u5e03-\u8ba2\u9605\u6a21\u5f0f\uff0c\u662f\u4e00\u79cd\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\uff0c\u4e00\u4e2a\u5bf9\u8c61\u72b6\u6001\u53d1\u751f\u6539\u53d8\uff0c\u6240\u6709\u4f9d\u8d56\u4e8e\u5b83\u7684\u5bf9\u8c61\u90fd\u5f97\u5230\u901a\u77e5\u5e76\u88ab\u81ea\u52a8\u66f4\u65b0\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u5b9a\u4e49\u4e8b\u4ef6",children:"\u5b9a\u4e49\u4e8b\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// OrderCreatedEvent.java\npublic static class OrderCreatedEvent extends ApplicationEvent {\n\n    private final String orderId;\n    private final String userId;\n\n    public OrderCreatedEvent(Object source, String orderId, String userId) {\n        super(source); // source \u901a\u5e38\u662f\u53d1\u5e03\u4e8b\u4ef6\u7684 bean\n        this.orderId = orderId;\n        this.userId = userId;\n    }\n\n    // Getters\n    public String getOrderId() { return orderId; }\n    public String getUserId() { return userId; }\n}\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"\n    @Data\n    public static class Item{\n        private String name;\n    }\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u53d1\u5e03\u4e8b\u4ef6",children:"\u53d1\u5e03\u4e8b\u4ef6"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'    // OrderService.java\n    @Service\n    public static class OrderService {\n\n        // Spring \u81ea\u52a8\u6ce8\u5165\u4e8b\u4ef6\u53d1\u5e03\u5668\n        @Autowired\n        private ApplicationEventPublisher eventPublisher;\n\n        public void createOrder(String userId, List<Item> items) {\n            // 1. \u521b\u5efa\u8ba2\u5355\u903b\u8f91\n            String orderId = saveOrder(userId, items);\n\n            // 2. \u53d1\u5e03\u4e8b\u4ef6\uff01 \ud83d\udc48 \u5173\u952e\u6b65\u9aa4\n            eventPublisher.publishEvent(\n                    new OrderCreatedEvent(this, orderId, userId)\n            );\n\n            // \u540e\u7eed\u903b\u8f91...\n        }\n\n        private String saveOrder(String userId, List<Item> items) {\n            // \u4fdd\u5b58\u5230\u6570\u636e\u5e93\n            return "ORD-" + System.currentTimeMillis();\n        }\n    }\n\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u76d1\u542c\u5668",children:"\u76d1\u542c\u5668"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'\n    // EmailNotificationListener.java\n    @Slf4j\n    @Component\n    public static class EmailNotificationListener {\n\n//        private static final Logger log = LoggerFactory.getLogger(EmailNotificationListener.class);\n\n        // \u76d1\u542c OrderCreatedEvent \u4e8b\u4ef6\n        @EventListener\n        public void handleOrderCreated(OrderCreatedEvent event) {\n            log.info("\ud83d\udce7 \u53d1\u9001\u90ae\u4ef6\u901a\u77e5: \u7528\u6237 {} \u7684\u8ba2\u5355 {} \u5df2\u521b\u5efa",\n                    event.getUserId(), event.getOrderId());\n            // \u5b9e\u9645\u53d1\u9001\u90ae\u4ef6\u903b\u8f91...\n        }\n    }\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u76d1\u542c\u5668-1",children:"\u76d1\u542c\u5668"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'\n    // SmsNotificationListener.java\n    @Component\n    public static class SmsNotificationListener {\n\n        @EventListener\n        public void handleOrderCreated(OrderCreatedEvent event) {\n            System.out.println("\ud83d\udcf1 \u53d1\u9001\u77ed\u4fe1\u901a\u77e5: \u8ba2\u5355 " + event.getOrderId() + " \u5df2\u521b\u5efa");\n            // \u5b9e\u9645\u53d1\u9001\u77ed\u4fe1\u903b\u8f91...\n        }\n    }\n'})}),"\n",(0,i.jsx)(n.h4,{id:"\u76d1\u542c\u5668-2",children:"\u76d1\u542c\u5668"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'    // InventoryUpdateListener.java\n    @Component\n    public static class InventoryUpdateListener {\n\n        @EventListener\n        public void updateInventory(OrderCreatedEvent event) {\n            System.out.println("\ud83d\udce6 \u6263\u51cf\u5e93\u5b58: \u5904\u7406\u8ba2\u5355 " + event.getOrderId());\n            // \u6263\u51cf\u5546\u54c1\u5e93\u5b58...\n        }\n    }\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u5b8c\u6574\u4ee3\u7801",children:"\u5b8c\u6574\u4ee3\u7801"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@RestController\n@SpringBootApplication\npublic class ObserverApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ObserverApplication.class, args);\n    }\n\n    // OrderCreatedEvent.java\n    public static class OrderCreatedEvent extends ApplicationEvent {\n\n        private final String orderId;\n        private final String userId;\n\n        public OrderCreatedEvent(Object source, String orderId, String userId) {\n            super(source); // source \u901a\u5e38\u662f\u53d1\u5e03\u4e8b\u4ef6\u7684 bean\n            this.orderId = orderId;\n            this.userId = userId;\n        }\n\n        // Getters\n        public String getOrderId() { return orderId; }\n        public String getUserId() { return userId; }\n    }\n    @Data\n    public static class Item{\n        private String name;\n    }\n\n    // OrderService.java\n    @Service\n    public static class OrderService {\n\n        // Spring \u81ea\u52a8\u6ce8\u5165\u4e8b\u4ef6\u53d1\u5e03\u5668\n        @Autowired\n        private ApplicationEventPublisher eventPublisher;\n\n        public void createOrder(String userId, List<Item> items) {\n            // 1. \u521b\u5efa\u8ba2\u5355\u903b\u8f91\n            String orderId = saveOrder(userId, items);\n\n            // 2. \u53d1\u5e03\u4e8b\u4ef6\uff01 \ud83d\udc48 \u5173\u952e\u6b65\u9aa4\n            eventPublisher.publishEvent(\n                    new OrderCreatedEvent(this, orderId, userId)\n            );\n\n            // \u540e\u7eed\u903b\u8f91...\n        }\n\n        private String saveOrder(String userId, List<Item> items) {\n            // \u4fdd\u5b58\u5230\u6570\u636e\u5e93\n            return "ORD-" + System.currentTimeMillis();\n        }\n    }\n    // EmailNotificationListener.java\n    @Slf4j\n    @Component\n    public static class EmailNotificationListener {\n\n//        private static final Logger log = LoggerFactory.getLogger(EmailNotificationListener.class);\n\n        // \u76d1\u542c OrderCreatedEvent \u4e8b\u4ef6\n        @EventListener\n        public void handleOrderCreated(OrderCreatedEvent event) {\n            log.info("\ud83d\udce7 \u53d1\u9001\u90ae\u4ef6\u901a\u77e5: \u7528\u6237 {} \u7684\u8ba2\u5355 {} \u5df2\u521b\u5efa",\n                    event.getUserId(), event.getOrderId());\n            // \u5b9e\u9645\u53d1\u9001\u90ae\u4ef6\u903b\u8f91...\n        }\n    }\n    // SmsNotificationListener.java\n    @Component\n    public static class SmsNotificationListener {\n\n        @EventListener\n        public void handleOrderCreated(OrderCreatedEvent event) {\n            System.out.println("\ud83d\udcf1 \u53d1\u9001\u77ed\u4fe1\u901a\u77e5: \u8ba2\u5355 " + event.getOrderId() + " \u5df2\u521b\u5efa");\n            // \u5b9e\u9645\u53d1\u9001\u77ed\u4fe1\u903b\u8f91...\n        }\n    }\n    // InventoryUpdateListener.java\n    @Component\n    public static class InventoryUpdateListener {\n\n        @EventListener\n        public void updateInventory(OrderCreatedEvent event) {\n            System.out.println("\ud83d\udce6 \u6263\u51cf\u5e93\u5b58: \u5904\u7406\u8ba2\u5355 " + event.getOrderId());\n            // \u6263\u51cf\u5546\u54c1\u5e93\u5b58...\n        }\n    }\n\n    @Resource\n    OrderService orderService;\n\n    @PostMapping("/create-order")\n    public String createOrder(@RequestBody List<Item> items) {\n        orderService.createOrder("user-1", items);\n        return "\u8ba2\u5355\u521b\u5efa\u6210\u529f\uff01";\n    }\n\n}\n'})})]})}function v(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,r){r.d(n,{R:()=>s,x:()=>d});var t=r(6540);const i={},a=t.createContext(i);function s(e){const n=t.useContext(a);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);